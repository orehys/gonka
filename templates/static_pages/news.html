{% extends "base.html" %}
{% block content %}
<section class="catalog_page">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="breadcrumbs">
                    <a href="/">Главная</a> / <a href="{% url 'page_contacts_short' %}">Контакты</a> / <a href="{% url 'page_news_short' %}">Новости</a>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="deliv_and_pay">
                    <h2>Новости</h2>
                     <div class="row">
                        {% for n in page_obj.object_list %}
                            <div class="col-md-4 col-12 mb-4">
                            <a href="{% url 'news_detail_short' slug=n.slug %}"><div class="one_carservice_our_news h-100 d-flex flex-column">
                                <div class="one_carservice_our_news_img"
                                    style="width:100%;height:200px;border-radius:16px;
                                            background:#f3f3f3 center/cover no-repeat;
                                            {% if n.image %}background-image:url('{{ n.image.url }}');{% endif %}">
                                </div>

                                <h3 class="mt-3 mb-0" style="color: var(--Greyscale-Darkgrey, #1C1C1C);">{{ n.title }}</h3>
                                <p class="mb-2">
                                {{ n.excerpt|default:n.body|truncatechars:200 }}
                                </p>
                                <h4 class="text-muted" style="font-size:14px;">
                                {{ n.published_at|date:"d.m.Y" }}
                                </h4>

                            </div></a>
                            </div>
                        {% empty %}
                            <div class="col-12 text-muted">Пока нет опубликованных новостей.</div>
                        {% endfor %}
                        </div>

                        {% if page_obj.paginator.num_pages > 1 %}
                        <nav class="mt-2">
                            <ul class="pagination justify-content-center">
                            {% for p in page_items %}
                                <li class="page-item {% if p == page_obj.number %}active{% endif %}">
                                <a class="page-link" href="?page={{ p }}">{{ p }}</a>
                                </li>
                            {% endfor %}
                            </ul>
                        </nav>
                        {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
